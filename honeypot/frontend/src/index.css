@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    -webkit-tap-highlight-color: transparent;
  }

  :root {
    /* Safe area insets for notched devices */
    --sat: env(safe-area-inset-top);
    --sar: env(safe-area-inset-right);
    --sab: env(safe-area-inset-bottom);
    --sal: env(safe-area-inset-left);
  }

  body {
    @apply bg-background text-text-primary font-sans antialiased overflow-x-hidden;
    /* Support for notched devices */
    padding-top: env(safe-area-inset-top);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
  }

  /* Mobile body adjustments */
  body.mobile {
    @apply select-none;
    -webkit-user-select: none;
    -webkit-touch-callout: none;
  }

  /* Prevent pull-to-refresh on mobile */
  body.mobile {
    overscroll-behavior-y: contain;
  }
}

@layer components {
  .glass-panel {
    @apply bg-glass-100 backdrop-blur-xl border border-white/5 shadow-2xl;
  }

  .glass-card {
    @apply bg-surface/50 backdrop-blur-md border border-white/5 rounded-xl transition-all duration-300 hover:bg-surface/70;
  }

  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400;
  }

  /* Touch-friendly buttons */
  .btn-touch {
    @apply min-h-[44px] min-w-[44px] active:scale-95 transition-transform;
  }

  /* Mobile-friendly input */
  .input-mobile {
    @apply text-[16px]; /* Prevents zoom on iOS */
  }

  /* Swipe indicator */
  .swipe-indicator {
    @apply absolute bottom-2 left-1/2 -translate-x-1/2 w-12 h-1 bg-white/20 rounded-full;
  }

  /* Mobile safe area padding */
  .safe-top {
    padding-top: max(1rem, env(safe-area-inset-top));
  }

  .safe-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }

  .safe-left {
    padding-left: max(1rem, env(safe-area-inset-left));
  }

  .safe-right {
    padding-right: max(1rem, env(safe-area-inset-right));
  }

  /* Mobile header with safe area */
  .mobile-header {
    @apply fixed top-0 left-0 right-0 z-50 bg-black/80 backdrop-blur-xl border-b border-white/5;
    padding-top: env(safe-area-inset-top);
  }

  /* Mobile bottom nav */
  .mobile-bottom-nav {
    @apply fixed bottom-0 left-0 right-0 z-50 bg-black/80 backdrop-blur-xl border-t border-white/5;
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Pull to refresh indicator */
  .ptr-indicator {
    @apply absolute top-0 left-1/2 -translate-x-1/2 -translate-y-full transition-transform;
  }

  .ptr-indicator.pulling {
    @apply translate-y-0;
  }
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-white/10 rounded-full hover:bg-white/20;
}

/* Mobile scrollbar (thinner) */
@media (max-width: 768px) {
  ::-webkit-scrollbar {
    width: 3px;
  }
}

/* iOS momentum scrolling */
@supports (-webkit-overflow-scrolling: touch) {
  .scroll-smooth {
    -webkit-overflow-scrolling: touch;
  }
}

/* Prevent text selection on mobile for UI elements */
.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Mobile-specific utilities */
@media (max-width: 768px) {
  /* Larger tap targets */
  button, a, input, select, textarea {
    min-height: 44px;
  }

  /* Prevent text resize */
  * {
    -webkit-text-size-adjust: 100%;
  }

  /* Full viewport height (accounting for mobile address bar) */
  .min-h-screen-mobile {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
}

/* Landscape mode adjustments */
@media (max-width: 896px) and (orientation: landscape) {
  .landscape-compact {
    @apply py-2;
  }
}

/* Loading skeleton for mobile */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.skeleton {
  animation: shimmer 2s infinite linear;
  background: linear-gradient(
    90deg,
    rgba(255,255,255,0.05) 0%,
    rgba(255,255,255,0.1) 50%,
    rgba(255,255,255,0.05) 100%
  );
  background-size: 1000px 100%;
}

/* Offline indicator */
.offline-indicator {
  @apply fixed top-0 left-0 right-0 bg-red-500/90 text-white text-center py-2 text-sm font-medium z-[60];
  padding-top: calc(env(safe-area-inset-top) + 0.5rem);
}